<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Web Music Player</title>
  <link rel="stylesheet" href="home.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="icon" href="img/istockphoto-2169022058-1024x1024.jpg" type="image/png" />
  <style>
    input[type="range"] {
      outline: none !important;
      box-shadow: none !important;
      border: none !important;
    }
    input[type="range"]:focus {
      outline: none;
      box-shadow: none;
    }

    #timeDisplay {
      display: flex;
      justify-content: space-between;
      color: #ccc;
      font-size: 0.9rem;
      margin-top: -10px;
      margin-bottom: 15px;
    }

    .text-primary {
      color: #49291e !important;
    }

    a.text-primary {
      color: #49291e !important;
    }

    a.text-primary:hover {
      color: #3b1f17 !important;
    }

    #nowPlaying {
      color: white !important;
    }

    .btn-outline-primary {
      color: white;
      border-color: white;
    }

    .btn-outline-primary:hover,
    .btn-outline-primary:focus {
      background-color: #49291e;
      color: #fff;
      border-color: #49291e;
    }

    .list-group-item.active {
      background-color: #e6d5cc !important;
      border-color: #e6d5cc !important;
      color: #49291e !important;
    }

    #progressBar::-webkit-slider-thumb,
    #progressBar::-moz-range-thumb,
    #progressBar::-ms-thumb {
      background-color: #e6d5cc;
      border: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg custom-navbar shadow-sm fixed-top w-100 px-4">
    <a class="navbar-brand text-white fw-bold" href="#">
      <i class="fa-solid fa-headphones"></i> MyMusic
    </a>
    <div class="ms-auto">
      <button class="btn btn-outline-light fw-semibold" id="logoutBtn">
        Logout <i class="fa-solid fa-right-from-bracket ms-1"></i>
      </button>
    </div>
  </nav>

  <div class="player-container text-white text-center p-4 rounded shadow-lg mt-5 pt-5">
    <h1><i class="fa-solid fa-music"></i> Web Music Player</h1>

    <input type="text" class="form-control mb-3" id="searchInput" placeholder="Search songs..." onkeyup="searchSongs()" />

    <div class="btn-group mb-3">
      <button class="btn custom-btn" onclick="filterCategory('Songs')">Songs</button>
      <button class="btn custom-btn" onclick="filterCategory('Romantic')">Romantic</button>
      <button class="btn custom-btn" onclick="filterCategory('Shaabi')">Shaabi</button>
      <button class="btn custom-btn" onclick="filterCategory('Mahraganat')">Mahraganat</button>
    </div>

    <ul id="playlist" class="list-group mb-3"></ul>

    <h5 id="nowPlaying" class="text-center mb-3">Now Playing: </h5>

    <div class="controls mb-3">
      <button class="btn btn-outline-primary" onclick="prevSong()"><i class="fa-solid fa-backward"></i></button>
      <button class="btn btn-outline-primary" onclick="togglePlayPause()" id="playPauseBtn"><i class="fa-solid fa-play"></i></button>
      <button class="btn btn-outline-primary" onclick="nextSong()"><i class="fa-solid fa-forward"></i></button>
      <input type="range" min="0" max="1" step="0.01" id="volumeControl" class="ms-3" onchange="setVolume(this.value)" />
    </div>

    <input type="range" id="progressBar" class="form-range" value="0" onchange="seek(this.value)" />

    <div id="timeDisplay">
      <span id="currentTime">00:00</span>
      <span id="totalTime">00:00</span>
    </div>

    <audio id="audioPlayer" onended="nextSong()"></audio>

    <div id="userLinks" class="mt-3">
      <a href="signup.html" class="text-primary text-decoration-underline fw-semibold">Create Your Account</a>
    </div>
  </div>

  <!-- <footer class="footer">
  <div class="social-icons">
    <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
  </div>
  <p>Â© 2025 My Music. All rights reserved.</p>
</footer>
 -->

  <script src="script.js"></script>
  <script>
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) {
      window.location.href = 'signup.html';
    } else {
      document.getElementById("userLinks").style.display = "none";
      const welcomeMsg = document.createElement("p");
      welcomeMsg.className = "fw-bold mb-2 text-white";
      welcomeMsg.innerHTML = `Welcome, ${currentUser.username}!`;

      const container = document.querySelector(".player-container");
      const heading = container.querySelector("h1");
      container.insertBefore(welcomeMsg, heading);
    }

    document.getElementById('logoutBtn').addEventListener('click', function () {
      localStorage.removeItem('currentUser');
      window.location.href = 'signup.html';
    });
  </script>
</body>
</html>
